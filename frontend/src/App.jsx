import {useState,useEffect,useMemo} from 'react';import OrderCard from './components/OrderCard';const App=()=>{const[executiveOrders,setExecutiveOrders]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const[selectedState,setSelectedState]=useState(null);const[activeFilter,setActiveFilter]=useState(null);const[searchTerm,setSearchTerm]=useState('');const[expandedOrderId,setExpandedOrderId]=useState(null);useEffect(()=>{fetchData();},[selectedState]);const fetchData=async()=>{setLoading(true);setError(null);try{const url=selectedState?`/api/legislation?state=${encodeURIComponent(selectedState)}`:`/api/executive-orders?page=1&per_page=25`;const res=await fetch(url);if(!res.ok)throw new Error(res.statusText);const{results}=await res.json();setExecutiveOrders(results);}catch(err){setError(err.message);}finally{setLoading(false);}};const filteredOrders=useMemo(()=>{let list=executiveOrders;if(searchTerm){const term=searchTerm.toLowerCase();list=list.filter(o=>o.title.toLowerCase().includes(term));}if(activeFilter){list=list.filter(o=>o.category===activeFilter);}return list;},[executiveOrders,searchTerm,activeFilter]);return(<div className="p-6">{loading&&<p>Loading...</p>}{error&&<p className="text-red-600">Error: {error}</p>}{!loading&&!error&&filteredOrders.length===0&&<p>No results found.</p>}<div className="space-y-4">{filteredOrders.map(order=><OrderCard key={order.document_number} order={order} isExpanded={expandedOrderId===order.document_number} onToggle={()=>setExpandedOrderId(expandedOrderId===order.document_number?null:order.document_number)}/>)} </div></div>);}export default App;
